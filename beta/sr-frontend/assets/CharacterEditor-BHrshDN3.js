import{V as x,o as s,aW as j,bo as N,p as r,r as g,z as w,N as b,B as h,T as u,bp as W,t as F,A as B,a5 as G,D as y,w as A,S as H,a0 as O,bq as U,a9 as c,y as v}from"./index-Dqudy-xe.js";import{c as p,C as E,a as q,E as R,b as V,d as T,S as J}from"./StatDisplay-CjXh7v3Z.js";import{u as Q,s as X,c as Y,f as Z,P as K,h as ss}from"./PathIcon-B9WLYAyg.js";import{M as k,D as M,b as ts,l as es,c as C,e as P,a as I,s as S,t as _}from"./UploadCard-BPF2JX7x.js";import{C as ns}from"./CardActionArea-kZXmAfrY.js";import{C as L,G as d}from"./Grid-zxS-wPlQ.js";function $(e){const{database:t}=x();return Q(t.chars,e)}function m({characterKey:e,abilityKey:t,dropDownButtonProps:a={}}){const n=$(e),{database:i}=x(),o=t.charAt(0).toUpperCase()+t.slice(1);return s(M,{title:`${o} Lv. ${(n==null?void 0:n[t])??1}`,disabled:!n,...a,children:!!e&&j(1,N[t][(n==null?void 0:n.ascension)??0]).map(l=>r(k,{selected:(n==null?void 0:n[t])===l,disabled:(n==null?void 0:n[t])===l,onClick:()=>i.chars.set(e,{[t]:l}),children:[o," Lv. ",l]},`${t}_${l}`))})}function is(){const e=g.useContext(ts),t=g.useContext(es);return g.useMemo(()=>e==null?void 0:e.withTag(t),[e,t])}const as=["hp","atk","def","spd","crit_","crit_dmg_","brEffect_","heal_","enerRegen_","eff_","eff_res_"];function gs({character:e,onClick:t}){const a=is()??X(Y(e));return s(P,{children:r(w,{children:[t?s(ns,{onClick:t,children:s(D,{character:e})}):s(D,{character:e}),s(C,{}),s(L,{children:as.map(n=>s(os,{calc:a,statKey:n,characterKey:e.key},n))})]})})}function D({character:e}){const{key:t,eidolon:a,level:n,ascension:i}=e,o=T(t),{damageType:l,path:f,rarity:z}=Z(o);return r(h,{sx:{display:"flex"},children:[s(h,{component:b?b:"img",alt:"Character Icon",src:p(o,"icon"),sx:{maxHeight:"10em",width:"auto"}}),r(h,{sx:{px:2,pt:1},children:[s(u,{variant:"h5",children:s(E,{genderedKey:o})}),s(u,{children:s(q,{stars:z,inline:!0})}),r(u,{children:["Lv.",W(n,i)," Eidolon: ",a]}),s(K,{pathKey:f}),s(F,{color:l,children:s(R,{ele:l})})]})]})}function os({characterKey:e,calc:t,statKey:a}){return r(u,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"space-between"},children:[s(V,{statKey:a}),r("span",{children:[B(t.withTag({src:e,dst:e}).compute(G.final[a]).val,a).toFixed(y(a)),A(a)]})]})}function hs({characterKey:e,onClose:t}){return s(O,{open:!!e,onClose:t,children:s(g.Suspense,{fallback:s(H,{variant:"rectangular",width:"100%",height:1e3}),children:e&&s(rs,{characterKey:e})})})}function rs({characterKey:e}){const t=$(e),a=T(e),{database:n}=x();return s(w,{children:r(L,{sx:{display:"flex",flexDirection:"column",gap:1},children:[s(u,{variant:"h3",children:s(E,{genderedKey:a})}),s(I,{type:"number",label:"Level",variant:"outlined",inputProps:{min:1,max:90},value:(t==null?void 0:t.level)||0,onChange:i=>n.chars.set(e,{level:parseInt(i.target.value)}),disabled:!t}),s(I,{type:"number",label:"Ascension",variant:"outlined",inputProps:{min:0,max:6},value:(t==null?void 0:t.ascension)||0,onChange:i=>n.chars.set(e,{ascension:parseInt(i.target.value)}),disabled:!t}),s(M,{title:`Eidolon Lv. ${(t==null?void 0:t.eidolon)??0}`,fullWidth:!1,disabled:!t,children:U.map(i=>r(k,{selected:(t==null?void 0:t.eidolon)===i,disabled:(t==null?void 0:t.eidolon)===i,onClick:()=>n.chars.set(e,{eidolon:i}),children:["Eidolon Lv. ",i]},i))}),r(P,{spacing:1,children:[s(u,{variant:"h6",children:"Abilites"}),s(C,{}),r(d,{container:!0,gap:1,children:[s(d,{item:!0,children:s(m,{characterKey:e,abilityKey:"basic",dropDownButtonProps:{startIcon:s(c,{size:1.5,sideMargin:!0,src:p(a,"basic_0")})}})}),s(d,{item:!0,children:s(m,{characterKey:e,abilityKey:"skill",dropDownButtonProps:{startIcon:s(c,{size:1.5,sideMargin:!0,src:p(a,"skill_0")})}})}),s(d,{item:!0,children:s(m,{characterKey:e,abilityKey:"ult",dropDownButtonProps:{startIcon:s(c,{size:1.5,sideMargin:!0,src:p(a,"ult_0")})}})}),s(d,{item:!0,children:s(m,{characterKey:e,abilityKey:"talent",dropDownButtonProps:{startIcon:s(c,{size:1.5,sideMargin:!0,src:p(a,"talent_0")})}})})]}),s(u,{variant:"h6",children:"Bonus Abilities"}),s(C,{}),s(d,{container:!0,gap:1,children:Object.entries((t==null?void 0:t.bonusAbilities)??{}).map(([i,o])=>s(d,{item:!0,children:s(v,{color:o?"success":"primary",onClick:()=>{n.chars.set(e,{bonusAbilities:{...t==null?void 0:t.bonusAbilities,[i]:!o}})},startIcon:o?s(S,{}):s(_,{}),children:s(c,{size:2,src:p(a,`bonusAbility${i}`),sideMargin:!0})})},i))}),s(u,{variant:"h6",children:"Stat Boosts"}),s(C,{}),s(d,{container:!0,gap:1,children:Object.entries((t==null?void 0:t.statBoosts)??{}).map(([i,o])=>{const{statKey:l,value:f}=ss(a,i);return s(d,{item:!0,children:r(v,{color:o?"success":"primary",onClick:()=>{n.chars.set(e,{statBoosts:{...t==null?void 0:t.statBoosts,[i]:!o}})},startIcon:o?s(S,{}):s(_,{}),children:[s(J,{statKey:l,iconProps:{sx:{ml:-1,mr:.5}}}),r(h,{children:[B(f,l),A(l)]})]})},i)})})]})]})})}export{hs as C,gs as a,is as b,$ as u};
