import{a as xe,g as Ce,s as H,_ as C,r as u,u as Re,ab as ci,ac as di,e as ve,Z as nt,ad as ui,ae as pi,j as v,f as he,h as ye,af as Ut,P as hi,ag as Cn,ah as vn,ai as yn,aj as kn,b as O,c as St,ak as fi,al as mi,T as R,am as wt,an as Rt,ao as gi,l as bi,d as xi,o as n,m as J,ap as Sn,V as I,aq as Ci,S as _t,a2 as Ie,i as Pe,k as Be,p,z as k,ar as vi,B as g,N as U,C as wn,a5 as V,as as yi,v as ki,w as qe,A as Si,D as Rn,Q as te,at as wi,au as Ue,av as Ri,aw as _i,ax as $i,ay as Mi,az as _n,aA as Ti,aa as $n,$ as Mn,x as Di,I as fe,a0 as le,aB as Ei,aC as Ii,a1 as Pi,y as q,aD as Bi,aE as it,aF as zi,aG as ji,aH as Ai,H as Tn,a9 as ge,aI as De,aJ as Li,aK as $t,aL as Mt,t as Ct,aM as Ni,aN as Oi,aO as Dn,aP as Wi,aQ as qi,aR as Fi,aS as Hi,aT as Ki,aU as Jt,aV as Vi,aW as ot,aX as En,aY as Gi,aZ as Ui,a_ as Ji,a$ as Xi,b0 as Zi,b1 as Xt,b2 as Qi,b3 as Yi,b4 as eo,b5 as to,b6 as Zt}from"./index-Dqudy-xe.js";import{a as In,C as no,H as io,F as oo,b as Pn,d as ao,i as Qt,c as F,e as Z,N as at,M as we,D as ze,f as ro,g as so,h as lo,j as co,k as uo,l as po}from"./UploadCard-BPF2JX7x.js";import{l as Tt,c as N,d as rt,S as Fe,r as Dt,b as re,T as Yt,C as ho}from"./StatDisplay-CjXh7v3Z.js";import{u as Bn,b as je,a as fo,C as mo}from"./CharacterEditor-BHrshDN3.js";import{u as Ae,s as zn,l as jn,g as An,t as go,w as en,a as bo,c as xo,r as Ln,b as ae,d as Co,e as vo,f as yo}from"./PathIcon-B9WLYAyg.js";import{u as Nn,a as ko,L as So}from"./LightConeEditorCard-CD0gdLnU.js";import{G as wo,c as On,d as _e,D as Wn,b as Ro}from"./Close-CwFHAs_N.js";import{C as B,G as X}from"./Grid-zxS-wPlQ.js";import{C as ce}from"./CardActionArea-kZXmAfrY.js";import{C as G,u as vt}from"./useForceUpdate-UfEYJw7y.js";import{u as pe}from"./useBoolState-DlFkYCQU.js";import{u as _o,S as Et,R as It,b as $o,c as Mo,d as To,a as Do}from"./RelicSetAutocomplete-VSQJwB3-.js";import{I as Eo}from"./InfoTooltip-Dv_CeJ44.js";function Io(e){return xe("MuiCollapse",e)}Ce("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Po=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Bo=e=>{const{orientation:t,classes:i}=e,o={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return ye(o,Io,i)},zo=H("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[i.orientation],i.state==="entered"&&t.entered,i.state==="exited"&&!i.in&&i.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>C({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&C({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),jo=H("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>C({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),Ao=H("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>C({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),qn=u.forwardRef(function(t,i){const o=Re({props:t,name:"MuiCollapse"}),{addEndListener:a,children:r,className:s,collapsedSize:c="0px",component:d,easing:l,in:h,onEnter:m,onEntered:f,onEntering:b,onExit:x,onExited:_,onExiting:z,orientation:M="vertical",style:y,timeout:T=ci.standard,TransitionComponent:L=di}=o,A=ve(o,Po),D=C({},o,{orientation:M,collapsedSize:c}),S=Bo(D),j=nt(),$=ui(),K=u.useRef(null),W=u.useRef(),me=typeof c=="number"?`${c}px`:c,de=M==="horizontal",Se=de?"width":"height",ie=u.useRef(null),pt=pi(i,ie),oe=w=>Y=>{if(w){const ue=ie.current;Y===void 0?w(ue):w(ue,Y)}},$e=()=>K.current?K.current[de?"clientWidth":"clientHeight"]:0,ne=oe((w,Y)=>{K.current&&de&&(K.current.style.position="absolute"),w.style[Se]=me,m&&m(w,Y)}),Ve=oe((w,Y)=>{const ue=$e();K.current&&de&&(K.current.style.position="");const{duration:Ne,easing:Ge}=Ut({style:y,timeout:T,easing:l},{mode:"enter"});if(T==="auto"){const Gt=j.transitions.getAutoHeightDuration(ue);w.style.transitionDuration=`${Gt}ms`,W.current=Gt}else w.style.transitionDuration=typeof Ne=="string"?Ne:`${Ne}ms`;w.style[Se]=`${ue}px`,w.style.transitionTimingFunction=Ge,b&&b(w,Y)}),oi=oe((w,Y)=>{w.style[Se]="auto",f&&f(w,Y)}),ai=oe(w=>{w.style[Se]=`${$e()}px`,x&&x(w)}),ri=oe(_),si=oe(w=>{const Y=$e(),{duration:ue,easing:Ne}=Ut({style:y,timeout:T,easing:l},{mode:"exit"});if(T==="auto"){const Ge=j.transitions.getAutoHeightDuration(Y);w.style.transitionDuration=`${Ge}ms`,W.current=Ge}else w.style.transitionDuration=typeof ue=="string"?ue:`${ue}ms`;w.style[Se]=me,w.style.transitionTimingFunction=Ne,z&&z(w)}),li=w=>{T==="auto"&&$.start(W.current||0,w),a&&a(ie.current,w)};return v.jsx(L,C({in:h,onEnter:ne,onEntered:oi,onEntering:Ve,onExit:ai,onExited:ri,onExiting:si,addEndListener:li,nodeRef:ie,timeout:T==="auto"?null:T},A,{children:(w,Y)=>v.jsx(zo,C({as:d,className:he(S.root,s,{entered:S.entered,exited:!h&&me==="0px"&&S.hidden}[w]),style:C({[de?"minWidth":"minHeight"]:me},y),ref:pt},Y,{ownerState:C({},D,{state:w}),children:v.jsx(jo,{ownerState:C({},D,{state:w}),className:S.wrapper,ref:K,children:v.jsx(Ao,{ownerState:C({},D,{state:w}),className:S.wrapperInner,children:r})})}))}))});qn.muiSupportAuto=!0;const Fn=qn,Lo=u.createContext({}),Hn=Lo;function No(e){return xe("MuiAccordion",e)}const Oo=Ce("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Je=Oo,Wo=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","slots","slotProps","TransitionComponent","TransitionProps"],qo=e=>{const{classes:t,square:i,expanded:o,disabled:a,disableGutters:r}=e;return ye({root:["root",!i&&"rounded",o&&"expanded",a&&"disabled",!r&&"gutters"],region:["region"]},No,t)},Fo=H(hi,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[{[`& .${Je.region}`]:t.region},t.root,!i.square&&t.rounded,!i.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${Je.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${Je.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e})=>({variants:[{props:t=>!t.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:t=>!t.disableGutters,style:{[`&.${Je.expanded}`]:{margin:"16px 0"}}}]})),Ho=u.forwardRef(function(t,i){const o=Re({props:t,name:"MuiAccordion"}),{children:a,className:r,defaultExpanded:s=!1,disabled:c=!1,disableGutters:d=!1,expanded:l,onChange:h,square:m=!1,slots:f={},slotProps:b={},TransitionComponent:x,TransitionProps:_}=o,z=ve(o,Wo),[M,y]=Cn({controlled:l,default:s,name:"Accordion",state:"expanded"}),T=u.useCallback(de=>{y(!M),h&&h(de,!M)},[M,h,y]),[L,...A]=u.Children.toArray(a),D=u.useMemo(()=>({expanded:M,disabled:c,disableGutters:d,toggle:T}),[M,c,d,T]),S=C({},o,{square:m,disabled:c,disableGutters:d,expanded:M}),j=qo(S),$=C({transition:x},f),K=C({transition:_},b),[W,me]=_o("transition",{elementType:Fn,externalForwardedProps:{slots:$,slotProps:K},ownerState:S});return v.jsxs(Fo,C({className:he(j.root,r),ref:i,ownerState:S,square:m},z,{children:[v.jsx(Hn.Provider,{value:D,children:L}),v.jsx(W,C({in:M,timeout:"auto"},me,{children:v.jsx("div",{"aria-labelledby":L.props.id,id:L.props["aria-controls"],role:"region",className:j.region,children:A})}))]}))}),Xe=Ho;function Ko(e){return xe("MuiAccordionDetails",e)}Ce("MuiAccordionDetails",["root"]);const Vo=["className"],Go=e=>{const{classes:t}=e;return ye({root:["root"]},Ko,t)},Uo=H("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),Jo=u.forwardRef(function(t,i){const o=Re({props:t,name:"MuiAccordionDetails"}),{className:a}=o,r=ve(o,Vo),s=o,c=Go(s);return v.jsx(Uo,C({className:he(c.root,a),ref:i,ownerState:s},r))}),Ze=Jo;function Xo(e){return xe("MuiAccordionSummary",e)}const Zo=Ce("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Te=Zo,Qo=["children","className","expandIcon","focusVisibleClassName","onClick"],Yo=e=>{const{classes:t,expanded:i,disabled:o,disableGutters:a}=e;return ye({root:["root",i&&"expanded",o&&"disabled",!a&&"gutters"],focusVisible:["focusVisible"],content:["content",i&&"expanded",!a&&"contentGutters"],expandIconWrapper:["expandIconWrapper",i&&"expanded"]},Xo,t)},ea=H(vn,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${Te.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Te.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${Te.disabled})`]:{cursor:"pointer"},variants:[{props:i=>!i.disableGutters,style:{[`&.${Te.expanded}`]:{minHeight:64}}}]}}),ta=H("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:t=>!t.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${Te.expanded}`]:{margin:"20px 0"}}}]})),na=H("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${Te.expanded}`]:{transform:"rotate(180deg)"}})),ia=u.forwardRef(function(t,i){const o=Re({props:t,name:"MuiAccordionSummary"}),{children:a,className:r,expandIcon:s,focusVisibleClassName:c,onClick:d}=o,l=ve(o,Qo),{disabled:h=!1,disableGutters:m,expanded:f,toggle:b}=u.useContext(Hn),x=M=>{b&&b(M),d&&d(M)},_=C({},o,{expanded:f,disabled:h,disableGutters:m}),z=Yo(_);return v.jsxs(ea,C({focusRipple:!1,disableRipple:!0,disabled:h,component:"div","aria-expanded":f,className:he(z.root,r),focusVisibleClassName:he(z.focusVisible,c),onClick:x,ref:i,ownerState:_},l,{children:[v.jsx(ta,{className:z.content,ownerState:_,children:a}),s&&v.jsx(na,{className:z.expandIconWrapper,ownerState:_,children:s})]}))}),Qe=ia;function oa(e){return xe("PrivateSwitchBase",e)}Ce("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const aa=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],ra=e=>{const{classes:t,checked:i,disabled:o,edge:a}=e,r={root:["root",i&&"checked",o&&"disabled",a&&`edge${O(a)}`],input:["input"]};return ye(r,oa,t)},sa=H(vn)(({ownerState:e})=>C({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),la=H("input",{shouldForwardProp:yn})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),ca=u.forwardRef(function(t,i){const{autoFocus:o,checked:a,checkedIcon:r,className:s,defaultChecked:c,disabled:d,disableFocusRipple:l=!1,edge:h=!1,icon:m,id:f,inputProps:b,inputRef:x,name:_,onBlur:z,onChange:M,onFocus:y,readOnly:T,required:L=!1,tabIndex:A,type:D,value:S}=t,j=ve(t,aa),[$,K]=Cn({controlled:a,default:!!c,name:"SwitchBase",state:"checked"}),W=kn(),me=ne=>{y&&y(ne),W&&W.onFocus&&W.onFocus(ne)},de=ne=>{z&&z(ne),W&&W.onBlur&&W.onBlur(ne)},Se=ne=>{if(ne.nativeEvent.defaultPrevented)return;const Ve=ne.target.checked;K(Ve),M&&M(ne,Ve)};let ie=d;W&&typeof ie>"u"&&(ie=W.disabled);const pt=D==="checkbox"||D==="radio",oe=C({},t,{checked:$,disabled:ie,disableFocusRipple:l,edge:h}),$e=ra(oe);return v.jsxs(sa,C({component:"span",className:he($e.root,s),centerRipple:!0,focusRipple:!l,disabled:ie,tabIndex:null,role:void 0,onFocus:me,onBlur:de,ownerState:oe,ref:i},j,{children:[v.jsx(la,C({autoFocus:o,checked:a,defaultChecked:c,className:$e.input,disabled:ie,id:pt?f:void 0,name:_,onChange:Se,readOnly:T,ref:x,required:L,ownerState:oe,tabIndex:A,type:D},D==="checkbox"&&S===void 0?{}:{value:S},b)),$?r:m]}))}),da=ca,ua=St(v.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),pa=St(v.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),ha=St(v.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function fa(e){return xe("MuiCheckbox",e)}const ma=Ce("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),ht=ma,ga=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],ba=e=>{const{classes:t,indeterminate:i,color:o,size:a}=e,r={root:["root",i&&"indeterminate",`color${O(o)}`,`size${O(a)}`]},s=ye(r,fa,t);return C({},t,s)},xa=H(da,{shouldForwardProp:e=>yn(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.indeterminate&&t.indeterminate,t[`size${O(i.size)}`],i.color!=="default"&&t[`color${O(i.color)}`]]}})(({theme:e,ownerState:t})=>C({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:fi(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${ht.checked}, &.${ht.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${ht.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),Ca=v.jsx(pa,{}),va=v.jsx(ua,{}),ya=v.jsx(ha,{}),ka=u.forwardRef(function(t,i){var o,a;const r=Re({props:t,name:"MuiCheckbox"}),{checkedIcon:s=Ca,color:c="primary",icon:d=va,indeterminate:l=!1,indeterminateIcon:h=ya,inputProps:m,size:f="medium",className:b}=r,x=ve(r,ga),_=l?h:d,z=l?h:s,M=C({},r,{color:c,indeterminate:l,size:f}),y=ba(M);return v.jsx(xa,C({type:"checkbox",inputProps:C({"data-indeterminate":l},m),icon:u.cloneElement(_,{fontSize:(o=_.props.fontSize)!=null?o:f}),checkedIcon:u.cloneElement(z,{fontSize:(a=z.props.fontSize)!=null?a:f}),ownerState:M,ref:i,className:he(y.root,b)},x,{classes:y}))}),Sa=ka;function wa(e){return xe("MuiInputAdornment",e)}const Ra=Ce("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),tn=Ra;var nn;const _a=["children","className","component","disablePointerEvents","disableTypography","position","variant"],$a=(e,t)=>{const{ownerState:i}=e;return[t.root,t[`position${O(i.position)}`],i.disablePointerEvents===!0&&t.disablePointerEvents,t[i.variant]]},Ma=e=>{const{classes:t,disablePointerEvents:i,hiddenLabel:o,position:a,size:r,variant:s}=e,c={root:["root",i&&"disablePointerEvents",a&&`position${O(a)}`,s,o&&"hiddenLabel",r&&`size${O(r)}`]};return ye(c,wa,t)},Ta=H("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:$a})(({theme:e,ownerState:t})=>C({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},t.variant==="filled"&&{[`&.${tn.positionStart}&:not(.${tn.hiddenLabel})`]:{marginTop:16}},t.position==="start"&&{marginRight:8},t.position==="end"&&{marginLeft:8},t.disablePointerEvents===!0&&{pointerEvents:"none"})),Da=u.forwardRef(function(t,i){const o=Re({props:t,name:"MuiInputAdornment"}),{children:a,className:r,component:s="div",disablePointerEvents:c=!1,disableTypography:d=!1,position:l,variant:h}=o,m=ve(o,_a),f=kn()||{};let b=h;h&&f.variant,f&&!b&&(b=f.variant);const x=C({},o,{hiddenLabel:f.hiddenLabel,size:f.size,disablePointerEvents:c,position:l,variant:b}),_=Ma(x);return v.jsx(mi.Provider,{value:null,children:v.jsx(Ta,C({as:s,ownerState:x,className:he(_.root,r),ref:i},m,{children:typeof a=="string"&&!d?v.jsx(R,{color:"text.secondary",children:a}):v.jsxs(u.Fragment,{children:[l==="start"?nn||(nn=v.jsx("span",{className:"notranslate",children:"​"})):null,a]})}))})}),Pt=Da;function Ea(e){return xe("MuiLinearProgress",e)}Ce("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const Ia=["className","color","value","valueBuffer","variant"];let Le=e=>e,on,an,rn,sn,ln,cn;const yt=4,Pa=wt(on||(on=Le`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Ba=wt(an||(an=Le`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),za=wt(rn||(rn=Le`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),ja=e=>{const{classes:t,variant:i,color:o}=e,a={root:["root",`color${O(o)}`,i],dashed:["dashed",`dashedColor${O(o)}`],bar1:["bar",`barColor${O(o)}`,(i==="indeterminate"||i==="query")&&"bar1Indeterminate",i==="determinate"&&"bar1Determinate",i==="buffer"&&"bar1Buffer"],bar2:["bar",i!=="buffer"&&`barColor${O(o)}`,i==="buffer"&&`color${O(o)}`,(i==="indeterminate"||i==="query")&&"bar2Indeterminate",i==="buffer"&&"bar2Buffer"]};return ye(a,Ea,t)},Bt=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?bi(e.palette[t].main,.62):xi(e.palette[t].main,.5),Aa=H("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,t[`color${O(i.color)}`],t[i.variant]]}})(({ownerState:e,theme:t})=>C({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:Bt(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),La=H("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.dashed,t[`dashedColor${O(i.color)}`]]}})(({ownerState:e,theme:t})=>{const i=Bt(t,e.color);return C({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${i} 0%, ${i} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},Rt(sn||(sn=Le`
    animation: ${0} 3s infinite linear;
  `),za)),Na=H("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.bar,t[`barColor${O(i.color)}`],(i.variant==="indeterminate"||i.variant==="query")&&t.bar1Indeterminate,i.variant==="determinate"&&t.bar1Determinate,i.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>C({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${yt}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${yt}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&Rt(ln||(ln=Le`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),Pa)),Oa=H("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.bar,t[`barColor${O(i.color)}`],(i.variant==="indeterminate"||i.variant==="query")&&t.bar2Indeterminate,i.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>C({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:Bt(t,e.color),transition:`transform .${yt}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&Rt(cn||(cn=Le`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Ba)),Wa=u.forwardRef(function(t,i){const o=Re({props:t,name:"MuiLinearProgress"}),{className:a,color:r="primary",value:s,valueBuffer:c,variant:d="indeterminate"}=o,l=ve(o,Ia),h=C({},o,{color:r,variant:d}),m=ja(h),f=gi(),b={},x={bar1:{},bar2:{}};if((d==="determinate"||d==="buffer")&&s!==void 0){b["aria-valuenow"]=Math.round(s),b["aria-valuemin"]=0,b["aria-valuemax"]=100;let _=s-100;f&&(_=-_),x.bar1.transform=`translateX(${_}%)`}if(d==="buffer"&&c!==void 0){let _=(c||0)-100;f&&(_=-_),x.bar2.transform=`translateX(${_}%)`}return v.jsxs(Aa,C({className:he(m.root,a),ownerState:h,role:"progressbar"},b,{ref:i},l,{children:[d==="buffer"?v.jsx(La,{className:m.dashed,ownerState:h}):null,v.jsx(Na,{className:m.bar1,ownerState:h,style:x.bar1}),d==="determinate"?null:v.jsx(Oa,{className:m.bar2,ownerState:h,style:x.bar2})]}))}),qa=Wa;function ke({condition:e,wrapper:t,falseWrapper:i,children:o}){return e?t(o):i?i(o):o}function dn({value:e,onChange:t,...i}){const[o,a]=u.useState(e);u.useEffect(()=>{a(e)},[e]);const r=()=>t(o);return n(In,{value:o,onChange:s=>a(s.target.value),onBlur:r,onKeyDown:s=>s.key==="Enter"&&!i.multiline&&r(),...i})}function Fa(){const e=u.useRef(),[t,i]=u.useState(0),[o,a]=u.useState(0);return u.useEffect(()=>{const r=()=>{var s,c;i(((s=e.current)==null?void 0:s.clientWidth)??0),a(((c=e.current)==null?void 0:c.clientHeight)??0)};return r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),{width:t,height:o,ref:e}}function Ha(e){const{t}=J("ui"),i=Sn({path:"/:page/*"}),o=t("pageTitle"),a=e??((i==null?void 0:i.params.page)&&t(`tabs.${i==null?void 0:i.params.page}`));u.useEffect(()=>{a?document.title=`${a} - ${o}`:document.title=o},[t,o,a])}function Kn(e){const{database:t}=I();return Ae(t.builds,e??"")}function zt(e){const{database:t}=I();return Ae(t.buildTcs,e??"")}function Ka(e){const{database:t}=I();return Ae(t.relics,e??"")}function He(e){const{database:t}=I();return Ae(t.teams,e)}function Va({charKey:e,setCharKey:t}){const{t:i}=J(["character","charNames_gen"]),{database:o}=I(),a=u.useCallback(c=>!!o.chars.get(c),[o.chars]),r=u.useCallback(c=>o.charMeta.get(c).favorite,[o.charMeta]),s=u.useMemo(()=>[{key:"",label:i("character:autocomplete.none")},...Ci.map(c=>({key:c,label:i(`charNames_gen:${c}`),favorite:r(c),color:a(c)?void 0:"secondary"}))],[a,r,i]);return n(u.Suspense,{fallback:n(_t,{variant:"text",width:100}),children:n(wo,{options:s,toImg:()=>n(Ie,{children:" "}),valueKey:e,onChange:c=>t(c??"")})})}var jt={},Ga=Be;Object.defineProperty(jt,"__esModule",{value:!0});var kt=jt.default=void 0,Ua=Ga(Pe()),Ja=v,Xa=(0,Ua.default)((0,Ja.jsx)("path",{d:"M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91zM4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29zM20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24v-1.57zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}),"Groups");kt=jt.default=Xa;function At({document:e,bgt:t="normal",collapse:i=!1}){switch(e.type){case"fields":return n(Za,{fieldsDocument:e,bgt:t});case"text":return i?n(Qa,{textDocument:e}):n(Vn,{textDocument:e});case"conditional":return n(no,{conditional:e.conditional,bgt:t});default:return null}}function Za({fieldsDocument:e,bgt:t="normal"}){return p(k,{bgt:t,children:[e.header&&n(io,{header:e.header,hideDivider:e.fields.length===0}),n(oo,{bgt:t,fields:e.fields})]})}function Vn({textDocument:e}){const t=u.useContext(Pn);return t?n("div",{children:vi(e.text,t)}):null}function Qa({textDocument:e}){const[t,i]=u.useState(!1),[o,a]=u.useState(!1);return p(g,{sx:{position:"relative"},children:[!t&&n(g,{sx:{pointerEvents:"none",position:"absolute",mx:"auto",width:"100%",display:"flex",justifyContent:"center",height:"100%",alignItems:"flex-end",zIndex:"10",transition:"transform 0.3s ease",transform:o?"translate(0,-5px)":void 0},children:n(ao,{})}),n(Fn,{onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),collapsedSize:55,onClick:()=>i(r=>!r),in:t,sx:{cursor:"pointer",position:"relative",maskImage:t?void 0:"linear-gradient(to bottom, black 0%, transparent 100%)","&:hover":{maskImage:t?void 0:"linear-gradient(to bottom, black 50%, transparent 100%)"}},children:n(Vn,{textDocument:e})})]})}function Ya(e){return"fieldRef"in e}const er=8,se=`${er}em`,Gn=12,be=`${Gn}em`;function tr({lightConeId:e,bgt:t,onClick:i}){const o=Nn(e);return o?n(Un,{bgt:t,lightCone:o,onClick:i}):n(Jn,{bgt:t})}function Un({lightCone:e,showLocation:t=!1,bgt:i,onClick:o}){const a=u.useCallback(f=>n(ce,{onClick:o,sx:{height:"100%",width:"100%"},children:f}),[o]),{key:r,level:s,location:c,ascension:d,superimpose:l}=e,h=u.useMemo(()=>zn(jn(r,s,d,l)),[d,r,s,l]),{rarity:m}=An(r);return n(k,{bgt:i,sx:{height:se,width:be},children:n(ke,{condition:!!o,wrapper:a,children:p(g,{sx:f=>({display:"flex",height:"100%",width:"100%",borderLeft:"5px solid",borderImage:`${f.palette[`grad${m}`].gradient} 1`}),children:[p(g,{sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[n(g,{component:U?U:"img",src:Tt(r,"cover"),sx:{m:-1,maxHeight:"100%",maxWidth:"100%"}}),n(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:t&&n(g,{sx:{position:"absolute",display:"flex",top:0,right:0},children:c?n(g,{component:U?U:"img",sx:{borderRadius:"50%",width:"2em",height:"2em",backgroundColor:"rgba(0,0,0,0.3)"},src:N(rt(c),"icon")}):n(On,{})})}),n(wn,{size:"small",label:n("strong",{children:` +${s}`}),sx:{position:"absolute",top:3,left:3,backgroundColor:"rgba(0,0,0,0.3)",backdropFilter:"blur(2px)"}})]}),n(g,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{py:"3px",pr:"3px",minWidth:"5em"},children:["hp","atk","def"].map(f=>n(nr,{calc:h,stat:f},f))})]})})})}function nr({calc:e,stat:t}){return n(g,{display:"flex",gap:1,alignContent:"center",children:p(R,{sx:{flexGrow:1,display:"flex",gap:.5,alignItems:"center"},component:"span",children:[n(g,{lineHeight:0,children:n(Fe,{statKey:t,iconProps:{fontSize:"inherit"}})}),n("span",{children:e.compute(V.base[t].with("sheet","lightCone")).val.toFixed()})]})})}function Jn({bgt:e,onClick:t}){const i=u.useCallback(o=>n(ce,{onClick:t,sx:{height:"100%"},children:o}),[t]);return n(k,{bgt:e,sx:{height:se,width:be},children:n(ke,{condition:!!t,wrapper:i,children:n(B,{sx:{display:"flex",height:se,width:be,alignItems:"center",justifyContent:"center"},children:n(yi,{sx:{height:"2em",width:"auto",opacity:.7}})})})})}function ir({relicId:e,slotKey:t,bgt:i,onClick:o,showLocation:a=!1}){const r=Ka(e);return r?n(or,{bgt:i,relic:r,onClick:o,showLocation:a}):n(rr,{bgt:i,slotKey:t})}function or({relic:e,showLocation:t=!1,bgt:i,onClick:o}){const a=u.useCallback(f=>n(ce,{onClick:o,sx:{height:"100%",width:"100%"},children:f}),[o]),{slotKey:r,rarity:s,level:c,mainStatKey:d,substats:l,location:h,setKey:m}=e;return n(k,{bgt:i,sx:{height:se,width:be},children:n(ke,{condition:!!o,wrapper:a,children:p(g,{sx:f=>({display:"flex",height:"100%",width:"100%",borderLeft:"5px solid",borderImage:`${f.palette[`grad${s}`].gradient} 1`}),children:[p(g,{sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[n(g,{component:U?U:"img",src:Dt(m,r),sx:{m:-1,maxHeight:"100%",maxWidth:"100%",maskImage:"linear-gradient( to right, rgba(0, 0, 0, 1), rgba(0, 0, 0, 1) 50%, rgba(0, 0, 0, 0))"}}),n(g,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:t&&n(g,{sx:{position:"absolute",display:"flex",top:"3px",right:"3px"},children:h?n(g,{component:U?U:"img",sx:{borderRadius:"50%",width:"2em",height:"2em",backgroundColor:"rgba(0,0,0,0.3)"},src:N(rt(h),"icon")}):n(On,{})})}),n(wn,{size:"small",label:n("strong",{children:` +${c}`}),sx:{position:"absolute",top:3,left:3,backgroundColor:"rgba(0,0,0,0.3)",backdropFilter:"blur(2px)"}}),p(R,{sx:{position:"absolute",display:"flex",alignItems:"center",backgroundColor:"rgba(0,0,0,0.3)",bottom:"3px",px:.5,borderRadius:"1em",backdropFilter:"blur(2px)"},children:[n(Fe,{statKey:d,iconProps:{style:{padding:"4px"}}}),p("span",{children:[ki(s,d,c),qe(d)]})]})]}),n(g,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{py:"3px",pr:"3px"},children:l.map((f,b)=>n(ar,{stat:f},b+f.key))})]})})})}function ar({stat:e}){const{value:t,key:i}=e;if(!t||!i)return null;const o=qe(e.key);return n(g,{display:"flex",gap:1,alignContent:"center",children:p(R,{sx:{flexGrow:1,display:"flex",gap:.5,alignItems:"center"},component:"span",children:[n(g,{lineHeight:0,children:n(Fe,{statKey:i,iconProps:{fontSize:"inherit"}})}),n("span",{children:`${Si(t,i).toFixed(Rn(i))}${o}`})]})})}function rr({slotKey:e,bgt:t}){return n(k,{bgt:t,sx:{display:"flex",height:se,width:be,alignItems:"center",justifyContent:"center"},children:n(Et,{slotKey:e,iconProps:{sx:{height:"2em",width:"auto",opacity:.7}}})})}function ft({relic:e,keys:t,bgt:i,onClick:o}){const a=u.useCallback(r=>n(ce,{onClick:o,sx:{height:"100%",width:"100%"},children:r}),[o]);return n(k,{bgt:i,sx:{height:se,width:se},children:n(ke,{condition:!!o,wrapper:a,children:n(g,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"space-between",p:1},children:t.map(r=>p(R,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",whiteSpace:"nowrap"},children:[n(Fe,{statKey:r}),p("span",{children:[(e.substats.stats[r]??0).toFixed(Rn(r)),qe(r)]})]},r))})})})}function Xn({sets:e,bgt:t,onClick:i}){const o=u.useCallback(a=>n(ce,{onClick:i,sx:{height:"100%",width:"100%"},children:a}),[i]);return n(k,{bgt:t,sx:{width:be,height:se},children:n(ke,{condition:!!i,wrapper:o,children:p(g,{sx:{height:"100%",width:"100%",p:1,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[!Object.keys(e).length&&n(R,{children:"No Relic sets"}),Object.entries(e).map(([a,r])=>p(R,{children:[n(te,{children:r})," ",n(It,{setKey:a})]},a))]})})})}function sr({slots:e,bgt:t,onClick:i}){const o=u.useCallback(a=>n(ce,{onClick:i,sx:{height:"100%",width:"100%"},children:a}),[i]);return n(k,{bgt:t,sx:{width:be,height:se},children:n(ke,{condition:!!i,wrapper:o,children:n(g,{sx:{height:"100%",width:"100%",p:1,display:"flex",flexDirection:"column",justifyContent:"space-between",alignContent:"space-between",flexWrap:"wrap"},children:Object.entries(e).map(([a,{level:r,statKey:s}])=>p(R,{children:[n(Et,{slotKey:a,iconProps:Qt})," ",n(Fe,{statKey:s,iconProps:Qt}),"+",r]},a))})})})}function lr({teamId:e,children:t}){const i=He(e),o=Ye(i.teamMetadata[0]),a=Ye(i.teamMetadata[1]),r=Ye(i.teamMetadata[2]),s=Ye(i.teamMetadata[3]),c=u.useMemo(()=>zn([...go(i.teamMetadata.map((d,l)=>d===void 0?void 0:wi[l]).filter(d=>!!d)),...o,...a,...r,...s,Ue.common.lvl.add(80),Ue.common.res.add(.1),Ue.common.isBroken.add(0),Ue.common.maxToughness.add(100),Ri.common.critMode.add("avg"),...i.conditionals.flatMap(({sheet:d,src:l,dst:h,condKey:m,condValues:f})=>f.flatMap((b,x)=>b?en(`preset${x}`,_i(d,l,h)(m,b)):[])),...i.bonusStats.flatMap(({tag:d,values:l})=>l.flatMap((h,m)=>en(`preset${m}`,{tag:{...d},value:$i(h)})))]),[i,o,a,r,s]);return n(Pn.Provider,{value:c,children:t})}function Ye(e){const t=Bn(e==null?void 0:e.characterKey),i=zt(e==null?void 0:e.buildTcId),o=Kn(e==null?void 0:e.buildId),a=Nn((e==null?void 0:e.buildType)==="equipped"?t==null?void 0:t.equippedLightCone:(e==null?void 0:e.buildType)==="real"?o==null?void 0:o.lightConeId:void 0),r=Mi((e==null?void 0:e.buildType)==="equipped"?t==null?void 0:t.equippedRelics:(e==null?void 0:e.buildType)==="real"?o==null?void 0:o.relicIds:void 0),s=u.useMemo(()=>{const d=(e==null?void 0:e.buildType)==="tc"?i==null?void 0:i.lightCone:a;return d?jn(d.key,d.level,d.ascension,d.superimpose):[]},[e==null?void 0:e.buildType,i==null?void 0:i.lightCone,a]),c=u.useMemo(()=>{const d=i==null?void 0:i.relic;return(e==null?void 0:e.buildType)==="tc"&&d?dr(d):r?cr(Object.values(r).filter(_n)):[]},[i==null?void 0:i.relic,e==null?void 0:e.buildType,r]);return u.useMemo(()=>t?bo(t.key,...xo(t),...s,...c):[],[t,s,c])}function cr(e){const t={},i={};return e.forEach(o=>{t[o.setKey]=(t[o.setKey]??0)+1,i[o.mainStatKey]=(i[o.mainStatKey]??0)+o.mainStatVal,o.substats.forEach(a=>{!a.key||!a.accurateValue||(i[a.key]=(i[a.key]??0)+a.accurateValue)})}),Ln(i,t)}function dr(e){const{slots:t,substats:{stats:i},sets:o}=e,a={...i};return Object.values(t).forEach(({level:r,statKey:s,rarity:c})=>{const d=Ti(c,s,r);a[s]=(a[s]??0)+d}),Ln(a,o)}var Lt={},ur=Be;Object.defineProperty(Lt,"__esModule",{value:!0});var Zn=Lt.default=void 0,pr=ur(Pe()),hr=v,fr=(0,pr.default)((0,hr.jsx)("path",{d:"M22 24H2v-4h20v4zM13.06 5.19l3.75 3.75L7.75 18H4v-3.75l9.06-9.06zm4.82 2.68-3.75-3.75 1.83-1.83c.39-.39 1.02-.39 1.41 0l2.34 2.34c.39.39.39 1.02 0 1.41l-1.83 1.83z"}),"BorderColor");Zn=Lt.default=fr;var Nt={},mr=Be;Object.defineProperty(Nt,"__esModule",{value:!0});var Qn=Nt.default=void 0,gr=mr(Pe()),br=v,xr=(0,gr.default)((0,br.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");Qn=Nt.default=xr;function Cr({teamId:e}){const t=He(e);return n(g,{display:"flex",flexDirection:"column",gap:1,children:t.teamMetadata.map((i,o)=>n(vr,{teamMetadataIndex:o,teamId:e},`${o}_${i==null?void 0:i.characterKey}`))})}const vr=u.memo(function({teamMetadataIndex:t,teamId:i}){var s;const{database:o}=I(),a=He(i);function r(c){if(c===""){o.teams.set(i,l=>l.teamMetadata[t]=void 0);return}o.chars.getOrCreate(c);const d=a.teamMetadata.findIndex(l=>(l==null?void 0:l.characterKey)===c);if(d===-1)o.teams.set(i,l=>{l.teamMetadata[t]={characterKey:c}});else{if(d===t)return;const l=a.teamMetadata[d],h=a.teamMetadata[t];o.teams.set(i,m=>{m.teamMetadata[t]=l,m.teamMetadata[d]=h})}}return n(Va,{charKey:((s=a.teamMetadata[t])==null?void 0:s.characterKey)??"",setCharKey:r})});function yr({teamId:e,charKey:t}){const{t:i}=J("page_team"),o=$n(),{database:a}=I(),r=He(e),s=nt(),c=Mn(s.breakpoints.down("md")),[d,l]=u.useState(!1),h=f=>{a.teams.set(e,{name:f})},m=f=>{a.teams.set(e,{description:f})};return p(g,{sx:()=>({borderBottom:"1px rgb(200,200,200,0.3) solid","& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"},"& .Mui-selected":{color:"white !important"},"& .MuiTabs-indicator":{height:"4px",backgroundColor:"rgb(200,200,200,0.5)"}}),children:[n(ce,{onClick:()=>l(!0),children:n(Di,{placement:"top",title:p(g,{children:[p(g,{sx:{display:"flex",color:"info.light",gap:1},children:[n(Zn,{}),n(R,{children:n("strong",{children:i("team.editNameDesc")})})]}),!!r.description&&n(R,{children:r.description})]}),children:n(B,{sx:{display:"flex",justifyContent:"center","&:hover":{color:"info.light"}},children:p(R,{variant:"h5",sx:{display:"flex",gap:1,alignItems:"center",justifyContent:"center",textShadow:"#000 0 0 10px !important"},children:[n(kt,{}),r.name]})})})}),n(le,{open:d,onClose:()=>l(!1),children:p(k,{children:[n(G,{title:i("team.editNameDesc"),avatar:n(kt,{}),titleTypographyProps:{variant:"h6"},action:n(fe,{onClick:()=>l(!1),children:n(_e,{})})}),n(F,{}),n(B,{children:p(g,{display:"flex",flexDirection:"column",gap:2,sx:{mt:2},children:[n(dn,{label:i("team.name"),value:r.name,onChange:f=>h(f),autoFocus:!0}),n(dn,{label:i("team.desc"),value:r.description,onChange:f=>m(f),multiline:!0,minRows:4}),n(Cr,{teamId:e})]})})]})}),n(F,{}),n(Ii,{variant:"fullWidth",value:t??0,orientation:c?"vertical":"horizontal",children:r.teamMetadata.map((f,b)=>{const x=f==null?void 0:f.characterKey;return n(Ei,{icon:n(Qn,{}),iconPosition:"start",value:x??b,disabled:!f,label:x?n(R,{children:i(`charNames_gen:${x}`)}):`Character ${b+1}`,onClick:()=>x&&o(`/teams/${e}/${x}`)},b)})})]})}var Ot={},kr=Be;Object.defineProperty(Ot,"__esModule",{value:!0});var Oe=Ot.default=void 0,Sr=kr(Pe()),wr=v,Rr=(0,Sr.default)((0,wr.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");Oe=Ot.default=Rr;const Wt=u.createContext({presetIndex:0,setPresetIndex:()=>{}}),st=u.createContext({teamId:"",team:{},teammateDatum:{buildType:"equipped",buildId:""}});function Q(){return u.useContext(st)}function _r({onClose:e}){const{database:t}=I(),{teammateDatum:{characterKey:i}}=Q(),[o,a]=vt(),[r,s]=vt(),c=u.useMemo(()=>o&&t.builds.getBuildIds(i),[o,t,i]),d=u.useMemo(()=>r&&t.buildTcs.getBuildTcIds(i),[r,t,i]);return u.useEffect(()=>t.builds.followAny(a),[t.builds,a]),u.useEffect(()=>t.buildTcs.followAny(s),[t.buildTcs,s]),p(k,{bgt:"dark",children:[n(G,{title:"Builds",action:e?n(fe,{onClick:e,children:n(_e,{})}):null}),n(F,{}),n(B,{children:p(Z,{spacing:1,children:[n(R,{variant:"h6",children:"Equipped build"}),n($r,{}),n(R,{variant:"h6",children:"Other builds"}),c.map(l=>n(Mr,{buildId:l},l)),n(R,{variant:"h6",children:"TC builds"}),n(q,{fullWidth:!0,onClick:()=>t.buildTcs.new(Bi(i)),children:"New TC Build"}),d.map(l=>n(Tr,{buildTcId:l},l))]})})]})}function qt(e,t=""){const{database:i}=I(),{teamId:o,teammateDatum:{characterKey:a,buildType:r,buildId:s,buildTcId:c}}=Q();return u.useMemo(()=>({active:r==="equipped"?r===e:r==="real"?s===t:r==="tc"&&c===t,onActive:()=>{i.teams.set(o,d=>{const l=d.teamMetadata.find(h=>(h==null?void 0:h.characterKey)===a);if(!l){console.error(`Teammate data not found for character ${a}`);return}l.buildType=e,e==="real"&&t?l.buildId=t:e==="tc"&&t&&(l.buildTcId=t)})}}),[s,c,r,a,i.teams,t,e,o])}function $r(){const e=it(),{equippedRelics:t,equippedLightCone:i}=e,{active:o,onActive:a}=qt("equipped");return n(Ft,{name:"Equipped",onActive:a,active:o,buildGrid:n(lt,{relicIds:t,lightConeId:i})})}function Mr({buildId:e}){const t=Kn(e),{relicIds:i,lightConeId:o,name:a,description:r}=t,{active:s,onActive:c}=qt("real",e);return n(Ft,{name:a,description:r,onActive:c,active:s,buildGrid:n(lt,{relicIds:i,lightConeId:o})})}function Ft({name:e,description:t,buildGrid:i,active:o,onActive:a}){const r=u.useCallback(()=>{},[]);return p(k,{sx:s=>({outline:o?`solid ${s.palette.success.main}`:void 0}),children:[p(g,{display:"flex",children:[n(ce,{onClick:r,children:n(G,{title:e,subheader:t})}),n(g,{display:"flex",alignContent:"center",sx:{padding:1},children:n(q,{size:"small",color:"success",onClick:a,disabled:o,children:"Set Active"})})]}),n(F,{}),n(B,{children:i})]})}function lt({relicIds:e,lightConeId:t}){const{database:i}=I(),o=u.useMemo(()=>{const l={};return Object.values(e).forEach(h=>{var f;const m=(f=i.relics.get(h))==null?void 0:f.setKey;m&&(l[m]=(l[m]||0)+1)}),Object.fromEntries(Object.entries(l).map(([h,m])=>m>=4?[h,4]:m>=2?[h,2]:[h,0]).filter(([,h])=>h>0))},[i.relics,e]),[a,r]=u.useState(2),{ref:s,width:c}=Fa(),d=nt();return u.useEffect(()=>{if(!s.current||!c)return;const l=parseFloat(window.getComputedStyle(s.current).fontSize),h=parseFloat(d.spacing(1)),m=l*Gn,f=Math.floor((c-m)/(m+h))+1,b=Math.ceil(8/f);r(b)},[s,d,c]),p(g,{ref:s,sx:{display:"grid",gap:1,boxSizing:"border-box",gridTemplateColumns:`repeat(auto-fit,${be})`,gridAutoFlow:"column",gridTemplateRows:`repeat(${a}, ${se})`,maxWidth:"100%",width:"100%"},children:[n(tr,{bgt:"light",lightConeId:t}),n(Xn,{bgt:"light",sets:o}),Pi.map(l=>n(ir,{bgt:"light",relicId:e[l],slotKey:l,showLocation:!0},l))]})}function Tr({buildTcId:e}){const t=zt(e),{name:i="ERROR",description:o="ERROR"}=t??{},{active:a,onActive:r}=qt("tc",e);return n(Ft,{name:i,description:o,onActive:r,active:a,buildGrid:n(Yn,{buildTcId:e})})}function Yn({buildTcId:e}){const{database:t}=I(),i=zt(e),{lightCone:o,relic:a}=i,[r,s,c]=pe(),[d,l,h]=pe(),[m,f,b]=pe(),[x,_,z]=pe(),M=u.useCallback(S=>{t.buildTcs.set(e,j=>({lightCone:{...j.lightCone,...S}}))},[e,t.buildTcs]),y=u.useCallback((S,j)=>{t.buildTcs.set(e,$=>({relic:{...$.relic,slots:{...$.relic.slots,[S]:{...$.relic.slots[S],...j}}}}))},[e,t.buildTcs]),T=u.useCallback((S,j)=>{t.buildTcs.set(e,$=>({relic:{...$.relic,substats:{...$.relic.substats,stats:{...$.relic.substats.stats,[S]:j}}}}))},[e,t.buildTcs]),L=u.useCallback(S=>{t.buildTcs.set(e,j=>({relic:{...j.relic,substats:{...j.relic.substats,type:S}}}))},[e,t.buildTcs]),A=u.useCallback((S,j)=>{t.buildTcs.set(e,$=>({relic:{...$.relic,sets:{...$.relic.sets,[S]:j}}}))},[e,t.buildTcs]),D=u.useCallback(S=>{t.buildTcs.set(e,j=>{const $={...j.relic.sets};return delete $[S],{relic:{...j.relic,sets:$}}})},[e,t.buildTcs]);return p(g,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[n(Dr,{show:r,onClose:c,lightCone:o,onUpdate:M}),o?n(Un,{bgt:"light",lightCone:o,onClick:s}):n(Jn,{bgt:"light",onClick:s}),n(zr,{show:x,onClose:z,sets:a.sets,setSets:A,removeSet:D}),n(Xn,{bgt:"light",sets:a.sets,onClick:_}),n(Er,{show:d,onClose:h,slots:a.slots,setSlot:y}),n(sr,{bgt:"light",slots:a.slots,onClick:l}),n(Pr,{stats:a.substats.stats,show:m,onClose:b,type:a.substats.type,setType:L,setStat:T}),n(ft,{onClick:f,relic:a,keys:["hp","hp_","def","def_"],bgt:"light"}),n(ft,{onClick:f,relic:a,keys:["atk","atk_","crit_","crit_dmg_"],bgt:"light"}),n(ft,{onClick:f,relic:a,keys:["spd","eff_","eff_res_","brEffect_"],bgt:"light"})]})}function Dr({lightCone:e={},onUpdate:t,show:i,onClose:o}){return n(le,{open:i,onClose:o,children:n(ko,{onClose:o,lightCone:e,setLightCone:t,hideLocation:!0})})}function Er({slots:e,show:t,onClose:i,setSlot:o}){return n(le,{open:t,onClose:i,containerProps:{maxWidth:"sm"},children:p(k,{children:[n(G,{title:"TC Build Relic Slots Editor",action:n(fe,{onClick:i,children:n(_e,{})})}),n(F,{}),n(B,{children:n(Z,{spacing:1,children:Object.entries(e).map(([a,{level:r,statKey:s,rarity:c}])=>n(Ir,{slotKey:a,level:r,statKey:s,rarity:c,setStatKey:d=>o(a,{statKey:d}),setRarity:d=>o(a,{rarity:d}),setLevel:d=>o(a,{level:d})},a))})})]})})}function Ir({slotKey:e,level:t,rarity:i,statKey:o,setStatKey:a,setRarity:r,setLevel:s}){return p(g,{sx:{display:"flex",gap:1,alignItems:"center",justifyContent:"space-between"},children:[n(Et,{slotKey:e}),n($o,{rarity:i,onRarityChange:r,showNumber:!0}),n(g,{sx:{flexGrow:1},children:n(Mo,{dropdownButtonProps:{fullWidth:!0},slotKey:e,statKey:o,setStatKey:a})}),n(at,{value:t,inputProps:{sx:{width:"2ch"},max:zi[i],min:0},InputProps:{startAdornment:n(Pt,{position:"start",children:"Level"})},size:"small",onChange:s})]})}function Pr({show:e,onClose:t,stats:i,setStat:o}){return n(le,{open:e,onClose:t,containerProps:{maxWidth:"sm"},children:p(k,{children:[n(G,{title:"TC Build Substats Editor",action:n(fe,{onClick:t,children:n(_e,{})})}),n(F,{}),n(B,{children:n(Z,{spacing:1,children:n(g,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",rowGap:1,columnGap:2},children:Object.entries(i).map(([a,r])=>n(Br,{statKey:a,value:r,setValue:s=>o(a,s)},a))})})})]})})}function Br({statKey:e,value:t,setValue:i}){return p(g,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"space-between"},children:[n(re,{statKey:e}),n(at,{value:t,onChange:i,float:qe(e)==="%",size:"small",inputProps:{sx:{width:"4em",textAlign:"right"},min:0,max:9999},InputProps:{endAdornment:qe(e)||n(g,{width:"0.8em",component:"span"})}})]})}function zr({show:e,onClose:t,sets:i,setSets:o,removeSet:a}){const[r,s]=u.useState(null),c=u.useCallback(l=>{l&&(ji(l)?o(l,2):Ai(l)&&s(l))},[o]),d=u.useCallback(l=>{r&&(o(r,l),s(null))},[r,o]);return n(le,{open:e,onClose:t,containerProps:{maxWidth:"sm"},children:p(k,{children:[n(G,{title:"TC Build Relic Sets Editor",action:n(fe,{onClick:t,children:n(_e,{})})}),n(F,{}),n(B,{children:p(Z,{spacing:1,children:[Object.entries(i).map(([l,h])=>p(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[n(It,{setKey:l}),n(te,{children:h}),n(fe,{size:"small",onClick:()=>a(l),children:n(To,{})})]},l)),p(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[n(Do,{size:"small",relicSetKey:r??"",setRelicSetKey:c,sx:{flexGrow:1},label:r??""}),p(Tn,{children:[n(q,{disabled:!r,onClick:()=>d(2),children:"2"}),n(q,{disabled:!r,onClick:()=>d(4),children:"4"})]})]})]})})]})})}function jr(e){return["basic","skill","ult","talent"].includes(e)}function ct(e,t){return[(i,o)=>n(Yt,{ns:`${e}_${t}_gen`,key18:i,values:o}),(i,o)=>n(Yt,{ns:`${e}_${t}`,key18:i,values:o})]}const We="Arlan",[Ar,cl]=ct("char",We),Lr={skill:{title:Ar("abilities.skill.0.name"),img:N(We,"skill_0"),documents:[{type:"conditional",conditional:{header:{icon:n(ge,{src:N(We,"skill_0")}),text:"Bool Conditional",additional:n(te,{children:"conditional"})},metadata:De.Arlan.boolConditional,label:"Bool Conditional"}},{type:"conditional",conditional:{header:{icon:n(ge,{src:N(We,"skill_0")}),text:"List Conditional",additional:n(te,{children:"Skill"})},metadata:De.Arlan.listConditional,label:(e,t)=>t===0?"Not Enabled":t===1?"Value 1":"Value 2",badge:(e,t)=>t===0?null:t===1?"1":"2"}},{type:"conditional",conditional:{header:{icon:n(ge,{src:N(We,"skill_0")}),text:"Num Conditional",additional:n(te,{children:"Skill"})},metadata:De.Arlan.numConditional,label:"Number of stacks",badge:"Stacks"}}]}};function Me({eidolon:e}){const{t}=J("characters_gen");return p("span",{children:[t("eidolonLvl")," ",e]})}function et({talentKey:e,children:t}){const{t:i}=J("characters_gen");return p("span",{children:[i(`ability.${e}`)," • ",t]})}const P="RuanMei",[E,dl]=ct("char",P),tt=Li.RuanMei,mt=De.RuanMei,ee=$t.RuanMei,gt=Mt.char[P],Nr={basic:{title:E("abilities.basic.0.name"),subtitle:n(et,{talentKey:"basic",children:E("abilities.basic.0.tag")}),img:N(P,"basic_0"),documents:[{type:"text",text:e=>E("abilities.basic.0.fullDesc",ae(P,"basic",e.compute(V.char.basic).val))},{type:"fields",fields:[{title:E("abilities.basic.0.name"),fieldRef:tt.basicDmg_0.tag}]}]},skill:{title:E("abilities.skill.0.name"),subtitle:n(et,{talentKey:"skill",children:E("abilities.skill.0.tag")}),img:N(P,"skill_0"),documents:[{type:"text",text:e=>E("abilities.skill.0.fullDesc",ae(P,"skill",e.compute(V.char.skill).val))},{type:"conditional",conditional:{header:{icon:n(ge,{src:N(P,"skill_0")}),text:"skill active",additional:n(te,{children:"Skill"})},metadata:mt.skillOvertone,label:"Overtone",fields:[{title:"Ally DMG Increase",fieldRef:ee.skillOvertone_dmg_.tag},{title:n(re,{statKey:"weakness_"}),fieldRef:ee.skillOvertone_weakness_.tag},{title:"Duration",fieldValue:gt.skill.duration}]}}]},ult:{title:E("abilities.ult.0.name"),subtitle:n(et,{talentKey:"ult",children:E("abilities.ult.0.tag")}),img:N(P,"ult_0"),documents:[{type:"text",text:e=>E("abilities.ult.0.fullDesc",ae(P,"ult",e.compute(V.char.ult).val))},{type:"conditional",conditional:{header:{icon:n(ge,{src:N(P,"ult_0")}),text:"ult active",additional:n(te,{children:"Ult"})},metadata:mt.ultZone,label:"Ult zone",fields:[{title:n(re,{statKey:"resPen_"}),fieldRef:ee.ultZone_resPen_.tag},{title:n(Ct,{color:"ice",children:"Thanatoplum Rebloom Break Damage"}),fieldRef:tt.zoneBreakDmg.tag},{title:"Duration",fieldValue:gt.ult.duration}]}}]},talent:{title:E("abilities.talent.0.name"),subtitle:n(et,{talentKey:"talent",children:E("abilities.talent.0.tag")}),img:N(P,"talent_0"),documents:[{type:"text",text:e=>E("abilities.talent.0.fullDesc",ae(P,"talent",e.compute(V.char.talent).val))},{type:"fields",fields:[{title:n(re,{statKey:"spd_"}),fieldRef:ee.talent_spd_.tag},{title:n(Ct,{color:"ice",children:"Somatotypical Helix Break DMG"}),fieldRef:tt.talentBreakDmg.tag}]},{type:"fields",fields:[{title:"bonus ability 3 buff",fieldRef:ee.ba3_brEff_.tag}]},{type:"fields",fields:[{title:"bonus ability 3 formula",fieldRef:tt.ba3_brEff_.tag}]}]},eidolon1:{title:E("ranks.1.name"),subtitle:n(Me,{eidolon:1}),img:N(P,"eidolon1"),documents:[{type:"text",text:E("ranks.1.desc",ae(P,"eidolon",1))},{type:"fields",fields:[{title:"Ignore DEF",fieldRef:ee.e1_defIgn_.tag}]}]},eidolon2:{title:E("ranks.2.name"),subtitle:n(Me,{eidolon:2}),img:N(P,"eidolon2"),documents:[{type:"text",text:E("ranks.2.desc",ae(P,"eidolon",2))},{type:"fields",fields:[{title:"atk_",fieldRef:ee.e2_atk_.tag}]}]},eidolon3:{title:E("ranks.3.name"),subtitle:n(Me,{eidolon:3}),img:N(P,"eidolon3"),documents:[{type:"text",text:E("ranks.3.desc",ae(P,"eidolon",3))},{type:"fields",fields:[{title:"talent",fieldRef:ee.eidolon3_talent.tag},{title:"ult",fieldRef:ee.eidolon3_ult.tag}]}]},eidolon4:{title:E("ranks.4.name"),subtitle:n(Me,{eidolon:4}),img:N(P,"eidolon4"),documents:[{type:"text",text:E("ranks.4.desc",ae(P,"eidolon",4))},{type:"conditional",conditional:{header:{icon:n(ge,{src:N(P,"eidolon4")}),text:E("ranks.4.name"),additional:n(te,{children:"Eidolon 4"})},metadata:mt.e4Broken,label:"Enemy Weakness Broken",fields:[{title:"Break Effect",fieldRef:ee.e4_break_.tag},{title:"Turns",fieldValue:gt.e4.duration}]}}]},eidolon5:{title:E("ranks.5.name"),subtitle:n(Me,{eidolon:5}),img:N(P,"eidolon5"),documents:[{type:"text",text:E("ranks.5.desc",ae(P,"eidolon",5))},{type:"fields",fields:[{title:"basic",fieldRef:ee.eidolon5_basic.tag},{title:"skill",fieldRef:ee.eidolon5_skill.tag}]}]},eidolon6:{title:E("ranks.6.name"),subtitle:n(Me,{eidolon:6}),img:N(P,"eidolon6"),documents:[{type:"text",text:E("ranks.6.desc",ae(P,"eidolon",6))}]}},ei={Arlan:Lr,RuanMei:Nr},Or=Ni.map(e=>{if(Oi.includes(e)){const t={...V.final.dmg_.tag,elementalType:e.slice(0,-5)};return{title:n(re,{statKey:e}),fieldRef:t}}return e==="crit_"?{fieldRef:V.common.cappedCrit_.tag,title:n(re,{statKey:e})}:{fieldRef:V.final[e].tag,title:n(re,{statKey:e})}}),Ht=[];Object.values(ei).forEach(e=>{Object.values(e).forEach(({documents:t})=>{t.forEach(i=>{i.type==="fields"&&i.fields.forEach(o=>{Ya(o)&&Ht.push({tag:o.fieldRef,value:o})})})})});Or.forEach(e=>{Ht.push({tag:e.fieldRef,value:e})});const ti=Co(Ht);function Wr(e){const{q:t,elementalType:i}=e;if(t==="heal"||t==="heal_")return"heal";if(i)return i}function qr(e){const{q:t}=e;return t==="dmg"}function Fr(e){const{damageType1:t,damageType2:i}=e,o=[];return qr(e)?(t&&o.push(t),i&&o.push(i),o):[]}function un({children:e}){const t=je(),i=(t==null?void 0:t.compute(V.lightCone.superimpose).val)??1;return e(i)}const Ke="PastSelfInMirror",[bt,ul]=ct("lightcone",Ke),pn=Mt.lightCone[Ke],hn=Tt(Ke,"cover"),Hr=De[Ke],Kr=$t[Ke],Vr={title:bt("passive.name"),img:hn,documents:[{type:"text",text:bt("passive.description")},{type:"conditional",conditional:{targeted:!0,header:{icon:n(ge,{src:hn,sx:{width:"auto"},size:2}),text:bt("passive.name")},metadata:Hr.useUltimate,label:"Wearer use their Ultimate",fields:[{title:n(re,{statKey:"dmg_"}),fieldRef:Kr.cond_dmg_.tag},{title:"Duration",fieldValue:n(un,{children:e=>pn.duration[e]})},{title:"Skill POint recovered",fieldValue:1}]}},{type:"fields",fields:[{title:"Energy regen at start of each wave",fieldValue:n(un,{children:e=>pn.enerRegn[e]})}]}]},Gr={PastSelfInMirror:Vr},Ee="WatchmakerMasterOfDreamMachinations",[fn,pl]=ct("relic",Ee),mn=Mt.relic[Ee],xt=Dt(Ee,Dn(Ee)),Ur=De[Ee],Jr=$t[Ee],Xr={2:{title:"2-Set",img:xt,documents:[{type:"text",text:fn("setEffects.2")},{type:"fields",fields:[{title:n(re,{statKey:"brEffect_"}),fieldValue:mn[2].brEffect_}]}]},4:{title:"4-Set",img:xt,documents:[{type:"text",text:fn("setEffects.4")},{type:"conditional",conditional:{targeted:!0,header:{icon:n(ge,{src:xt}),text:"Use Their Ult on an ally",additional:n(te,{children:"4-Set"})},metadata:Ur.useUltimateOnAlly,label:"4-Set",fields:[{title:n(re,{statKey:"brEffect_"}),fieldRef:Jr.set4_brEffect_.tag},{title:"Duration",fieldValue:mn[4].duration}]}}]}},Zr={WatchmakerMasterOfDreamMachinations:Xr};function Qr(){const[e,t,i]=pe();return p(Ie,{children:[n(q,{onClick:t,children:"Bonus Stats"}),n(Yr,{open:e,onClose:i})]})}function Yr({open:e,onClose:t}){const{database:i}=I(),{presetIndex:o}=u.useContext(Wt),{teamId:a,team:{bonusStats:r},teammateDatum:{characterKey:s}}=Q(),c=d=>{const l=es(d,s);i.teams.setBonusStat(a,l,0,o)};return n(le,{open:e,onClose:t,children:p(k,{children:[n(G,{title:"Bonus Stats"}),n(F,{}),n(B,{children:p(Z,{spacing:1,children:[r.map(({tag:d,values:l},h)=>n(is,{tag:d,value:l[o],setValue:m=>i.teams.setBonusStat(a,d,m,o),onDelete:()=>i.teams.setBonusStat(a,d,0,o),setTag:m=>i.teams.setBonusStat(a,m,0,o)},JSON.stringify(d)+h)),n(ns,{onSelect:c})]})})]})})}function es(e,t){return{src:t,dst:t,et:"own",q:e,qt:"premod",sheet:"agg"}}const ts=["hp","hp_","def","def_","atk","atk_","spd","spd_","dmg_","enerRegen_","brEffect_","crit_","crit_dmg_","eff_","eff_res_","heal_"];function ns({tag:e={},onSelect:t}){var i;return n(ze,{title:(e&&((i=ti.subset(e)[0])==null?void 0:i.title))??"Add Bonus Stat",children:ts.map(o=>n(we,{onClick:()=>t(o),children:o},o))})}function is({tag:e,setTag:t,value:i,setValue:o,onDelete:a}){var s;const r=(s=e.name||e.q)==null?void 0:s.endsWith("_");return n(k,{bgt:"light",children:p(B,{sx:{display:"flex",gap:1,justifyContent:"space-around"},children:[n(te,{sx:{m:"auto"},children:e.q}),e.q==="dmg_"&&n(os,{tag:e,setElementalType:c=>{const{elementalType:d,...l}=e;t(c?{...l,elementalType:c}:l)}}),n(at,{float:!0,value:i,sx:{flexBasis:150,flexGrow:1,height:"100%"},onChange:o,placeholder:"Stat Value",size:"small",inputProps:{sx:{textAlign:"right"}},InputProps:{endAdornment:p(Pt,{position:"end",sx:{ml:0},children:[r?"%":void 0," ",n(fe,{"aria-label":"Delete Bonus Stat",onClick:a,edge:"end",children:n(Wn,{fontSize:"small"})})]})}})]})})}function os({tag:e,setElementalType:t}){return p(ze,{title:e.elementalType??"No Element",children:[n(we,{onClick:()=>t(null),children:"No Element"}),Wi.map(i=>n(we,{onClick:()=>t(i),children:i},i))]})}function as({lcKey:e}){const t=Gr[e];return t?n(k,{children:p(B,{children:[p(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[n(g,{component:U?U:"img",alt:"Light Cone Cover Image",src:Tt(e,"cover"),sx:{maxHeight:"5em",width:"auto"}}),n(R,{variant:"h6",children:n(So,{lcKey:e})})]}),n(rs,{uiSheetElement:t})]})}):null}function rs({uiSheetElement:e}){const{documents:t,title:i}=e;return p(k,{bgt:"light",children:[n(G,{title:i,titleTypographyProps:{variant:"h6"}}),n(F,{}),n(B,{children:n(Z,{spacing:1,children:t.map((o,a)=>n(At,{document:o},a))})})]})}const ss=["PastSelfInMirror"];function ls(){return n(k,{bgt:"dark",children:n(B,{children:n(X,{container:!0,columns:3,spacing:1,children:ss.map(e=>n(X,{item:!0,xs:1,children:n(as,{lcKey:e})},e))})})})}function gn({tag:e}){var t;return n(Ct,{color:Wr(e),children:((t=ti.subset(e)[0])==null?void 0:t.title)||e.name||e.q})}function dt({optTarget:e,setOptTarget:t,buttonProps:i={}}){const{t:o}=J("optimize"),a=je();return n(ze,{title:p(g,{sx:{display:"flex",gap:1},children:[o("optTarget"),e?n(gn,{tag:e}):null]}),...i,children:a==null?void 0:a.listFormulas(V.listing.formulas).map((r,s)=>p(we,{onClick:()=>t(r.tag),children:[n(Ro,{children:n(gn,{tag:r.tag})}),n(g,{sx:{display:"flex",gap:1,ml:1},children:Fr(r.tag).map(c=>n(te,{children:c},c))})]},`${s}_${r.tag.sheet||r.tag.q}_${r.tag.name}`))})}function cs({setKey:e}){const t=Zr[e];return t?n(k,{children:p(B,{children:[p(g,{sx:{display:"flex",gap:1,alignItems:"center"},children:[n(g,{component:U?U:"img",alt:"Relic Piece Image",src:Dt(e,Dn(e)),sx:{maxHeight:"5em",width:"auto"}}),p(g,{children:[n(R,{variant:"h6",children:n(It,{setKey:e})}),n(R,{children:n(te,{children:qi(e)?"Cavern":"Planar"})})]})]}),n(Z,{spacing:1,children:Object.entries(t).map(([i,o])=>n(ds,{uiSheetElement:o},i))})]})}):null}function ds({uiSheetElement:e}){const{documents:t,title:i}=e;return p(k,{bgt:"light",children:[n(G,{title:i,titleTypographyProps:{variant:"h6"}}),n(F,{}),n(B,{children:n(Z,{spacing:1,children:t.map((o,a)=>n(At,{document:o},a))})})]})}const us=["WatchmakerMasterOfDreamMachinations"];function ps(){return n(k,{bgt:"dark",children:n(B,{children:n(X,{container:!0,columns:3,spacing:1,children:us.map(e=>n(X,{item:!0,xs:1,children:n(cs,{setKey:e})},e))})})})}function hs(){const{database:e}=I(),{team:t,teamId:i}=Q();return p(k,{sx:{overflow:"visible",top:137,position:"sticky",zIndex:101},children:[n(G,{title:"Combo Editor"}),n(F,{}),p(B,{sx:{display:"flex",gap:1,overflowX:"auto"},children:[t.frames.map((o,a)=>n(fs,{tag:o,index:a,setTarget:r=>e.teams.set(i,s=>{s.frames=[...s.frames],s.frames[a]=r})},a+JSON.stringify(o??{}))),n(g,{sx:{flexShrink:0},children:n(dt,{setOptTarget:o=>e.teams.set(i,a=>{a.frames=[...a.frames,o]})})})]})]})}function fs({tag:e,index:t,setTarget:i}){const{presetIndex:o,setPresetIndex:a}=u.useContext(Wt);return p(k,{bgt:"light",sx:r=>({flexShrink:0,outline:o===t?`solid ${r.palette.success.main}`:void 0}),children:[n(ke,{condition:o!==t,wrapper:r=>n(ce,{onClick:()=>a(t),children:r}),children:n(G,{title:`Combo ${t+1}`})}),n(F,{}),n(B,{children:p(Z,{spacing:1,children:[n(dt,{optTarget:e,setOptTarget:i}),n(Qr,{}),n(ms,{}),n(gs,{})]})})]})}function ms(){const[e,t,i]=pe();return p(Ie,{children:[n(q,{onClick:t,children:"Relic Conditionals"}),n(le,{open:e,onClose:i,children:n(ps,{})})]})}function gs(){const[e,t,i]=pe();return p(Ie,{children:[n(q,{onClick:t,children:"Light Cone Conditionals"}),n(le,{open:e,onClose:i,children:n(ls,{})})]})}const bs=5e4;class xs{constructor(t,i,o,a,r,s,c,d){this.characterKey=t,this.calc=i,this.frames=o,this.statFilters=a,this.lightCones=r,this.relicsBySlot=s,this.numWorkers=c,this.setProgress=d,this.worker=new Worker(new URL(""+new URL("parentWorker-Dv6yhoSu.js",import.meta.url).href,import.meta.url),{type:"module"})}async optimize(){return await new Promise((i,o)=>{this.worker.onmessage=({data:r})=>{switch(r.resultType){case"progress":this.setProgress(r.progress);break;case"done":i(r.buildResults);break;case"err":console.error(r),o();break}};const a={command:"start",lightCones:this.lightCones,relicsBySlot:this.relicsBySlot,detachedNodes:this.detachNodes(),constraints:this.statFilters.map(({value:r,isMax:s})=>({value:r,isMax:s})),numWorkers:this.numWorkers};this.worker.postMessage(a)})}async terminate(){const t={command:"terminate"};this.worker.postMessage(t),await new Promise((i,o)=>{this.worker.onmessage=({data:a})=>{switch(a.resultType){case"terminated":i();break;case"err":console.error(a),o();break}}}),this.worker.terminate()}detachNodes(){const t=new Set(Fi),i=new Set(Hi);return vo([Ki(...this.frames.map((a,r)=>new Jt(a,"sum").with("preset",`preset${r}`))),...this.statFilters.map(({tag:a})=>new Jt(a,"sum"))],this.calc,a=>{if(a.src===this.characterKey&&a.et==="own"){if(a.sheet==="dyn"&&a.qt==="premod")return{q:a.q};if(a.q==="count"&&t.has(a.sheet))return{q:a.sheet};if(a.qt=="lightCone"&&["lvl","ascension","superimpose"].includes(a.q))return{q:a.q};if(a.q==="count"&&i.has(a.sheet))return{q:a.sheet}}})}}var Kt={},Cs=Be;Object.defineProperty(Kt,"__esModule",{value:!0});var ni=Kt.default=void 0,vs=Cs(Pe()),ys=v,ks=(0,vs.default)((0,ys.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp");ni=Kt.default=ks;var Vt={},Ss=Be;Object.defineProperty(Vt,"__esModule",{value:!0});var ii=Vt.default=void 0,ws=Ss(Pe()),Rs=v,_s=(0,ws.default)((0,Rs.jsx)("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8zM6 18l6-4.5 6 4.5H6z"}),"Checkroom");ii=Vt.default=_s;const ut=u.createContext({optConfigId:"",optConfig:{}});function $s({optConfigId:e,children:t}){const{database:i}=I(),o=Ae(i.optConfigs,e),a=u.useMemo(()=>({optConfigId:e,optConfig:o}),[e,o]);return n(ut.Provider,{value:a,children:t})}function Ms(e){const{database:t}=I();return Ae(t.generatedBuildList,e)}const Ts=u.memo(function(){const{optConfig:t}=u.useContext(ut),i=Ms(t.generatedBuildListId??"");return n(Z,{spacing:1,children:i==null?void 0:i.builds.map((o,a)=>n(k,{children:p(B,{children:[p(g,{sx:{display:"flex",justifyContent:"space-between",gap:1},children:[p(R,{children:["Build ",a+1,": ",Vi(o.value)]}),n(Ds,{build:o})]}),n(lt,{relicIds:o.relicIds,lightConeId:o.lightConeId})]})},`${o.lightConeId}-${Object.values(o.relicIds).join("-")}`))})});function Ds({build:{relicIds:e,lightConeId:t}}){const{t:i}=J("build"),[o,a]=u.useState(""),[r,s,c]=pe(),[d,l]=u.useState(!1),{database:h}=I(),{teamId:m,teammateDatum:{characterKey:f}}=Q(),b=x=>{x.preventDefault(),d||h.builds.new({characterKey:f,name:o,teamId:m,relicIds:e,lightConeId:t}),a(""),c()};return p(Ie,{children:[n(q,{color:"info",size:"small",startIcon:n(ii,{}),onClick:s,children:i("createBuildReal.button")}),n(le,{open:r,onClose:c,disableRestoreFocus:!0,children:p(k,{children:[n(G,{title:i("createBuildReal.title"),action:n(fe,{onClick:c,children:n(_e,{})})}),n(F,{}),p(B,{sx:{display:"flex",flexDirection:"column",gap:1},children:[n(R,{children:i("createBuildReal.desc")}),p(g,{display:"flex",alignItems:"center",sx:{ml:-1},children:[n(Sa,{size:"small",checked:d,onChange:()=>l(!d)}),n(R,{children:"Create a new TC Build"})]}),p("form",{onSubmit:b,children:[n(In,{value:o,onChange:x=>a(x.target.value),autoFocus:!0,margin:"dense",label:i("createBuildReal.label"),fullWidth:!0}),p(g,{sx:{display:"flex",justifyContent:"flex-end",gap:1},children:[n(q,{onClick:c,children:i("createBuildReal.cancel")}),n(q,{type:"submit",color:"success",disabled:!o,children:i("createBuildReal.create")})]})]})]})]})})]})}function Es({statFilters:e,setStatFilters:t,disabled:i=!1}){const o=u.useCallback((d,l)=>{const h=structuredClone(e);typeof l>"u"?h.push({tag:d,value:0,isMax:!1,disabled:!1}):h[l].tag=d,t(h)},[t,e]),a=u.useCallback(d=>{const l=structuredClone(e);l.splice(d,1),t(l)},[t,e]),r=u.useCallback((d,l)=>{const h=structuredClone(e);h[d].value=l,t(h)},[t,e]),s=u.useCallback((d,l)=>{const h=structuredClone(e);h[d].isMax=l,t(h)},[t,e]),c=u.useCallback((d,l)=>{const h=structuredClone(e);h[d].disabled=l,t(h)},[t,e]);return p(g,{display:"flex",flexDirection:"column",gap:1,children:[e.map((d,l)=>n(Is,{statFilter:d,setTarget:h=>o(h,l),delTarget:()=>a(l),setTargetValue:h=>r(l,h),setTargetisMax:h=>s(l,h),setDisabled:h=>c(l,h),disabled:i},l+JSON.stringify(d))),n(dt,{setOptTarget:d=>o(d)})]})}function Is({statFilter:e,setTarget:t,delTarget:i,setTargetValue:o,setTargetisMax:a,setDisabled:r,disabled:s}){var f;const{tag:c,value:d,isMax:l,disabled:h}=e,m=(f=c.name||c.q)==null?void 0:f.endsWith("_");return p(g,{sx:{display:"flex",gap:1},children:[p(Tn,{sx:{"& .MuiButtonGroup-grouped":{minWidth:24},width:"100%",flexGrow:1},children:[n(q,{color:h?"secondary":"success",onClick:()=>r(!h),disabled:s,size:"small",children:h?n(ro,{}):n(so,{})}),n(dt,{optTarget:c,setOptTarget:t,buttonProps:{sx:{flexGrow:1},size:"small"}}),n(q,{onClick:()=>a(!l),size:"small",children:n("strong",{children:l?"<=":">="})})]}),n(at,{float:!0,value:d,sx:{flexBasis:150,flexGrow:1,height:"100%"},disabled:s,onChange:o,placeholder:"Stat Value",size:"small",inputProps:{sx:{textAlign:"right"}},InputProps:{endAdornment:p(Pt,{position:"end",sx:{ml:0},children:[m?"%":void 0," ",n(fe,{"aria-label":"Delete Stat Constraint",onClick:i,edge:"end",children:n(Wn,{fontSize:"small"})})]})}})]})}function Ps({disabled:e=!1}){const{t}=J("page_character_optimize"),{optConfigId:i,optConfig:{statFilters:o}}=u.useContext(ut),{database:a}=I(),r=u.useCallback(s=>a.optConfigs.set(i,{statFilters:s}),[a,i]);return n(g,{children:p(k,{bgt:"light",children:[n(B,{sx:{display:"flex",gap:1,justifyContent:"space-between",flexDirection:"column"},children:p(g,{display:"flex",justifyContent:"space-between",children:[n(R,{sx:{fontWeight:"bold"},children:t("constraintFilter.title")}),n(Eo,{title:n(R,{children:t("constraintFilter.tooltip")})})]})}),n(F,{}),n(Es,{statFilters:o,setStatFilters:r,disabled:e})]})})}function Bs({numWorkers:e,setNumWorkers:t}){const{t:i}=J("optimize"),o=navigator.hardwareConcurrency||8;return n(ze,{title:`${i("numWorkers")}: ${e}`,children:ot(1,o).map(a=>n(we,{onClick:()=>t(a),children:i("workers",{count:a})},a))})}function zs(){const{database:e}=I(),{teammateDatum:t,teamId:i}=u.useContext(st),o=t.optConfigId,a=u.useCallback(()=>{o||e.teams.set(i,r=>{const s=r.teamMetadata.find(c=>(c==null?void 0:c.characterKey)===t.characterKey);if(s){const c=e.optConfigs.new();s.optConfigId=c}})},[i,t.characterKey,e,o]);return o?p($s,{optConfigId:o,children:[n(js,{}),n(Ts,{})]}):n(k,{children:n(G,{title:p("span",{children:["Optimize this team for ",t.characterKey]}),action:n(q,{onClick:a,children:"Optimize"})})})}function js(){const{t:e}=J("optimize"),{database:t}=I(),i=je(),{team:o,teammateDatum:{characterKey:a}}=u.useContext(st),[r,s]=u.useState(8),[c,d]=u.useState(void 0),{optConfig:l,optConfigId:h}=u.useContext(ut),m=it(),{equippedLightCone:f}=m,b=u.useMemo(()=>t.relics.values.reduce((A,D)=>(A[D.slotKey].push(D),A),{head:[],hands:[],feet:[],body:[],sphere:[],rope:[]}),[t.relics.values]),x=u.useMemo(()=>{const{path:A}=yo(rt(a));return t.lightCones.values.filter(({key:D})=>{const{path:S}=An(D);return A===S})},[a,t.lightCones.values]),_=u.useMemo(()=>Object.values(b).reduce((A,D)=>A*D.length,1)*x.length,[x.length,b]),[z,M]=u.useState(!1),y=u.useRef(()=>{});u.useEffect(()=>()=>y.current(),[]);const T=u.useCallback(async()=>{if(!i)return;const A=new Promise($=>y.current=$);d(void 0),M(!0);const D=(l.statFilters??[]).filter(({disabled:$})=>!$).map(({tag:$,value:K,isMax:W})=>({tag:$,value:K,isMax:W})),S=new xs(a,i,o.frames,D,x,b,r,d);A.then(async()=>await S.terminate());const j=await S.optimize();await S.terminate(),y.current=()=>{},M(!1),j.length&&t.optConfigs.newOrSetGeneratedBuildList(h,{builds:j.slice(0,5).map(({relicIds:$,value:K})=>({lightConeId:f,relicIds:$,value:K})),buildDate:Date.now()})},[i,l.statFilters,a,o.frames,x,b,r,t.optConfigs,h,f]),L=u.useCallback(()=>{y.current(),M(!1)},[y]);return p(k,{children:[n(G,{title:e("optimize"),action:p(g,{children:[n(Bs,{numWorkers:r,setNumWorkers:s}),n(q,{onClick:z?L:T,color:z?"error":"primary",startIcon:z?n(_e,{}):n(ni,{}),children:e(z?"cancel":"optimize")})]})}),n(F,{}),p(B,{children:[n(Ps,{}),c&&n(As,{progress:c,totalPermutations:_})]})]})}function As({progress:e,totalPermutations:t}){const{t:i}=J("optimize");return p(g,{children:[p(R,{children:[i("totalProgress"),": ",e.numBuildsComputed.toLocaleString()," /"," ",t.toLocaleString()]}),p(R,{children:[i("buildsKept"),": ",e.numBuildsKept.toLocaleString()," /"," ",bs.toLocaleString()]}),n(qa,{variant:"determinate",value:e.numBuildsComputed/t*100})]})}const Ls={xs:12,sm:6,md:4};function Ns(){const{teammateDatum:{characterKey:e}}=Q(),t=je(),{database:i}=I(),o=["basic","skill","ult","talent"],a=nt(),r=Mn(a.breakpoints.up("lg")),s=ei[e],c=(t==null?void 0:t.compute(V.char.eidolon).val)??0,d=u.useMemo(()=>s&&ot(1,En).map(l=>{const h=s[`eidolon${l}`];return h?n(bn,{talentKey:`eidolon${l}`,sheetElement:h,onClickTitle:()=>i.chars.set(e,{eidolon:l===c?l-1:l})}):null}),[e,s,i.chars,c]);if(!(!s||!t))return n(Ie,{children:p(X,{container:!0,spacing:1,children:[r&&p(X,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[n(xn,{eidolon:c}),d&&d.map((l,h)=>n(g,{sx:{opacity:c>=h+1?1:.5},children:l},h))]}),n(X,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:o.map(l=>{const h=s[l];return h?n(X,{item:!0,...Ls,children:n(bn,{talentKey:l,sheetElement:h})},l):null})}),!r&&n(X,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:n(X,{item:!0,xs:12,children:n(xn,{eidolon:c})})})]})})}function bn({sheetElement:e,talentKey:t,onClickTitle:i}){const{teammateDatum:{characterKey:o}}=Q(),a=u.useCallback(c=>n(ce,{onClick:i,children:c}),[i]);let r=null;r=null,jr(t)&&(r=n(Os,{talentKey:t,dropDownButtonProps:{sx:{borderRadius:0}},setTalent:c=>s.chars.set(o,d=>{d[t]=c})}));const{database:s}=I();return p(k,{bgt:"light",sx:{height:"100%"},children:[r,p(B,{children:[n(ke,{condition:!!i,wrapper:a,children:p(X,{container:!0,sx:{flexWrap:"nowrap"},children:[n(X,{item:!0,children:n(g,{component:U?U:"img",src:e==null?void 0:e.img,sx:{width:60,height:"auto"}})}),p(X,{item:!0,flexGrow:1,sx:{pl:1},children:[n(R,{variant:"h6",children:e==null?void 0:e.title}),e.subtitle&&n(R,{variant:"subtitle1",children:e.subtitle})]})]})}),e.documents.map((c,d)=>n(At,{document:c,collapse:!0},d))]})]})}function xn({eidolon:e}){const{t}=J("characters_gen"),{teammateDatum:{characterKey:i}}=Q(),{database:o}=I();return n(ze,{fullWidth:!0,title:p("span",{children:[t("eidolonLvl")," ",e]}),color:"primary",children:ot(0,En).map(a=>n(we,{selected:e===a,disabled:e===a,onClick:()=>o.chars.set(i,{eidolon:a}),children:p("span",{children:[t("eidolonLvl")," ",a]})},a))})}function Os({talentKey:e,setTalent:t,dropDownButtonProps:i}){const{t:o}=J("common_gen"),a=it(),r=je();if(!r||!a)return null;const s=0,c=r.compute(V.char[e]).val,d=r.compute(V.char.ascension).val;return n(ze,{fullWidth:!0,title:p("span",{children:[o("lv")," ",c]}),color:"primary",...i,children:ot(1,Gi[d]).map(l=>n(we,{selected:a[e]===l,disabled:a[e]===l,onClick:()=>t(l),children:p("span",{children:[o("lv")," ",l+s]})},l))})}function Ws(){const{teammateDatum:{characterKey:e,buildType:t}}=Q(),i=it(),[o,a]=u.useState(void 0);return p(Z,{gap:1,children:[p(g,{sx:{display:"flex",gap:1},children:[p(g,{sx:{minWidth:"350px"},children:[n(fo,{character:i}),n(mo,{characterKey:o,onClose:()=>a(void 0)}),n(q,{fullWidth:!0,disabled:!e,onClick:()=>e&&a(e),children:"Edit Character"})]}),n(qs,{})]}),n(hs,{}),n(Vs,{}),n(Ns,{}),t!=="tc"&&n(zs,{})]})}function qs(){const{teammateDatum:e}=Q(),{database:t}=I(),{buildType:i,buildId:o,buildTcId:a}=e,[r,s]=vt(),c=u.useMemo(()=>r&&t.teams.getActiveBuildName(e),[t.teams,r,e]);u.useEffect(()=>{let m=()=>{};return i==="real"&&(m=t.builds.follow(o,s)),i==="tc"&&(m=t.buildTcs.follow(a,s)),()=>m()},[o,a,i,t,s]);const[d,l,h]=pe();return p(k,{sx:{width:"100%"},children:[n(Ks,{show:d,onClose:h}),n(G,{title:c,action:n(q,{onClick:l,size:"small",children:"Change Build"})}),n(F,{}),n(B,{children:i==="tc"?n(Hs,{}):n(Fs,{})})]})}function Fs(){const{teammateDatum:e}=Q(),{database:t}=I(),{relicIds:i,lightConeId:o}=u.useMemo(()=>t.teams.getTeamActiveBuild(e),[t.teams,e]);return n(lt,{relicIds:i,lightConeId:o})}function Hs(){const{teammateDatum:e}=Q();return e.buildType!=="tc"?null:n(Yn,{buildTcId:e.buildTcId})}function Ks({show:e,onClose:t}){return n(le,{open:e,onClose:t,containerProps:{maxWidth:"xl"},children:n(_r,{onClose:t})})}function Vs(){const e=je();return n(k,{bgt:"dark",children:p(B,{children:[p(Xe,{children:[n(Qe,{expandIcon:n(Oe,{}),children:"All target listings"}),n(Ze,{children:n(Z,{children:e==null?void 0:e.listFormulas(V.listing.formulas).map((t,i)=>{const o=e.compute(t),a=t.tag.name||t.tag.q;return p(g,{children:[p(R,{children:[a,": ",o.val]}),p(Xe,{children:[p(Qe,{expandIcon:n(Oe,{}),children:["debug for ",a]}),p(Ze,{children:["conds:"," ",JSON.stringify(o.meta.conds,void 0,2),n(R,{component:"pre",children:JSON.stringify(e.toDebug().compute(t),void 0,2)})]})]})]},`${a}${i}`)})})})]}),p(Xe,{children:[n(Qe,{expandIcon:n(Oe,{}),children:"All target buffs"}),n(Ze,{children:n(Z,{children:e==null?void 0:e.listFormulas(V.listing.buffs).map((t,i)=>{const o=e.compute(t),a=t.tag.name||t.tag.q;return p(g,{children:[p(R,{children:[a,": ",o.val]}),p(Xe,{children:[p(Qe,{expandIcon:n(Oe,{}),children:["debug for ",a]}),p(Ze,{children:["conds:"," ",JSON.stringify(o.meta.conds,void 0,2),n(R,{component:"pre",children:JSON.stringify(e.toDebug().compute(t),void 0,2)})]})]})]},`${a}${i}`)})})})]})]})})}const Gs=n(_t,{variant:"rectangular",width:"100%",height:1e3});function hl(){const{database:e}=I(),{teamId:t}=Ui(),i=!t||!e.teams.keys.includes(t);return u.useEffect(()=>{i||e.teams.set(t,{lastEdit:Date.now()})},[t,e.teams,i]),i?n(eo,{to:"/teams"}):n(g,{display:"flex",flexDirection:"column",gap:1,children:n(u.Suspense,{fallback:Gs,children:t&&n(Us,{teamId:t})})})}function Us({teamId:e}){const t=$n(),{database:i}=I(),[o,a]=u.useState(0),r=u.useMemo(()=>({presetIndex:o,setPresetIndex:a}),[o,a]),s=He(e),{teamMetadata:c}=s,{params:{characterKey:d}}=Sn({path:"/teams/:teamId/:characterKey",end:!1})??{params:{}},l=u.useMemo(()=>{const y=c.findIndex(T=>T&&T.characterKey===d);return y===-1?0:y},[c,d]),h=u.useMemo(()=>c[l],[c,l]),m=h==null?void 0:h.characterKey;u.useEffect(()=>{m&&m!==d&&t(`${m}`,{replace:!0})},[m,d,h,t]);const{t:f}=J(["charNames_gen","page_character"]);Ha(u.useMemo(()=>{const y=f(m?"charNames_gen:Character":"Team Settings");return`${s.name} - ${y}`},[m,f,s.name]));const b=u.useMemo(()=>{if(!(!e||!s||!h))return{teamId:e,team:s,teammateDatum:h}},[h,s,e]),x=u.useMemo(()=>{const y=s.teamMetadata.filter(_n).map(({characterKey:L})=>L);m&&Ji(y,m);const T=Xi(y,L=>n(ho,{genderedKey:rt(L)}));return{srcDisplay:T,dstDisplay:T}},[s.teamMetadata,m]),_=u.useMemo(()=>s.conditionals.map(({sheet:y,src:T,dst:L,condKey:A,condValues:D})=>({sheet:y,src:T,dst:L,condKey:A,condValue:D[o]})),[o,s.conditionals]),z=u.useCallback((y,T,L,A,D)=>{!Zi(y)||!Xt(L)||!Xt(A)||!Qi(y,T)||i.teams.setConditional(e,y,T,L,A,D,o)},[i.teams,o,e]),M=u.useMemo(()=>({src:m,dst:m,preset:`preset${o}`}),[m,o]);return n(po.Provider,{value:M,children:n(Wt.Provider,{value:r,children:n(lr,{teamId:e,children:n(lo.Provider,{value:x,children:n(co.Provider,{value:_,children:n(uo.Provider,{value:z,children:p(g,{sx:{display:"flex",gap:1,flexDirection:"column",mx:1,mt:2},children:[n(k,{sx:{overflow:"visible",top:0,position:"sticky",zIndex:100},children:n(yr,{teamId:e,charKey:m})}),n(g,{children:b&&n(st.Provider,{value:b,children:n(Js,{})})})]})})})})})})})}function Js(){const{teammateDatum:{characterKey:e}}=Q(),t=Bn(e);return t?n(Yi.Provider,{value:t,children:n(to,{children:n(Zt,{path:":characterKey",children:n(Zt,{path:"*",index:!0,element:n(Ws,{})})})})}):n(_t,{variant:"rectangular",width:"100%",height:1e3})}export{hl as default};
