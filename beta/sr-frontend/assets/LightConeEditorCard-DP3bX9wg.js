import{V as $,m as u,r as l,aS as L,o as a,a9 as k,S as x,p as m,I as D,z as f,T as w,bh as S,a4 as p,bi as v}from"./index-CRI9GZ7I.js";import{u as I}from"./PathIcon-BOSYuc1f.js";import{l as K,T}from"./StatDisplay-Db_1BrL5.js";import{M as y,D as b}from"./UploadCard-iMOmTSV8.js";import{G as _,d as A,L as G}from"./Close-CNlYHnC2.js";import{C as M}from"./useForceUpdate-CREtFZ5V.js";import{C as N,G as d}from"./Grid-qk3b5hAH.js";function O(s){const{database:e}=$();return I(e.lightCones,s??"")}function B({lcKey:s,setLCKey:e,label:n=""}){const{t:c}=u(["lightCone","lightConeNames_gen"]);n=n||c("editor.lightConeName");const o=l.useMemo(()=>L.map(i=>({key:i,label:c(`lightConeNames_gen:${i}`)})),[c]),t=l.useCallback(i=>e(i??""),[e]),r=l.useCallback(i=>i?a(k,{size:2,sx:{width:"auto"},src:K(i,"cover")}):void 0,[]);return a(l.Suspense,{fallback:a(x,{variant:"text",width:100}),children:a(_,{options:o,valueKey:s,onChange:t,toImg:r,label:n})})}function P({lcKey:s}){return a(T,{ns:"lightConeNames_gen",key18:s})}function Q({onClose:s,lightCone:e,setLightCone:n,footer:c,hideLocation:o=!1}){const{t}=u(["lightCone","common"]);return m(f,{bgt:"dark",children:[a(M,{title:"Light Cone Editor",action:a(D,{onClick:s,children:a(A,{})})}),m(N,{sx:{display:"flex",flexDirection:"column",gap:1},children:[m(d,{container:!0,spacing:1,columns:{xs:1,md:2},children:[a(d,{item:!0,xs:1,md:!0,display:"flex",flexDirection:"column",children:a(B,{lcKey:(e==null?void 0:e.key)??"",setLCKey:r=>n({key:r}),label:e!=null&&e.key?"":t("editor.unknownLightCone")})}),a(d,{item:!0,xs:!0,md:"auto",display:"flex",children:a(E,{superimpose:(e==null?void 0:e.superimpose)??1,setSuperimposition:r=>n({superimpose:r}),disabled:!(e!=null&&e.key)})})]}),m(d,{container:!0,spacing:1,columns:{xs:1,md:4},marginBottom:1,children:[a(d,{item:!0,xs:1,display:"flex",flexDirection:"row",gap:1,children:a(j,{level:e==null?void 0:e.level,ascension:e==null?void 0:e.ascension,setLevelAscension:(r,i)=>{n({level:r,ascension:i})},disabled:!(e!=null&&e.key)})}),a(d,{item:!0,xs:1,display:"flex",gap:1,children:a(f,{bgt:"light",sx:{p:1,flexGrow:1,alignContent:"center"},children:a(l.Suspense,{fallback:a(x,{width:"60%"}),children:m(w,{color:"text.secondary",align:"center",children:[t("editor.ascension")," ",(e==null?void 0:e.ascension)||0]})})})}),!o&&a(d,{item:!0,xs:1,md:2,display:"flex",flexDirection:"column",gap:1,children:a(G,{locKey:(e==null?void 0:e.location)??"",setLocKey:r=>n({location:r})})})]}),c]})]})}function E({superimpose:s,setSuperimposition:e,disabled:n=!1}){const{t:c}=u("lightCone_gen");return a(b,{title:`${c("superimpose")} ${s}`,color:"primary",disabled:n,fullWidth:!0,children:S.map(o=>m(y,{selected:s===o,disabled:s===o,onClick:()=>e(o),children:[c("superimpose")," ",o]},o))})}function j({level:s,ascension:e,setLevelAscension:n,disabled:c=!1}){const{t:o}=u(["common_gen","common"]);return a(b,{title:s?`${o("lv")} ${s}/${p[e??0]}`:o("common:selectlevel"),color:"primary",disabled:c,fullWidth:!0,children:v.map(([t,r])=>a(y,{selected:s===t&&e===r,disabled:s===t&&e===r,onClick:()=>n(t,r),children:t===p[r]?`${o("lv")} ${t}`:`${o("lv")} ${t}/${p[r]}`},`${t}/${r}`))})}export{P as L,Q as a,O as u};
